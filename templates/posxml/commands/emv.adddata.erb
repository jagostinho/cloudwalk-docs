<% content_for :docs_description do %>
  <meta name="docs:description" content="<%= I18n.t('posxml.commands.emv_adddata.description') %>">
<% end %>

<h1><%= I18n.t("posxml.commands.title") %> <em>emv.adddata</em></h1>

<p class="note"><%= I18n.t("posxml.commands.emv_adddata.paragraph_1") %></p>

<p><%= I18n.t("posxml.commands.emv_adddata.paragraph_2") %></p>

<h2><%= I18n.t("posxml.commands.parameters") %></h2>

<ol class="parameters">
  <li><%= I18n.t("posxml.commands.emv_adddata.parameters.parameter_1") %></li>
  <li><%= I18n.t("posxml.commands.emv_adddata.parameters.parameter_2") %></li>
  <li><%= I18n.t("posxml.commands.emv_adddata.parameters.parameter_3") %></li>
  <li><%= I18n.t("posxml.commands.emv_adddata.parameters.parameter_4") %></li>
</ol>

<h2 id="table-of-parameters"><%= I18n.t("posxml.commands.emv_adddata.paragraph_3") %></h2>

<p><%= I18n.t("posxml.commands.emv_adddata.paragraph_8") %></p>

<table cellpadding="0" cellspacing="0" border="0" class="table table-bordered table-hover">
  <thead>
    <tr>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_4") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_5") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_6") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_7") %></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bAcquirerID</td>
      <td>Acquiring Network Identifier</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>bReqApplication</td>
      <td>99 - All applications</br>
      0 - Only application selections in waAppArray</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>baInitialValue</td>
      <td>Initial value (Amount authorized). 12 characters with 0 padding to the left, example: “000000005000”(50,00)</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>baDate</td>
      <td>Date of the transaction (“AAMMDD”)</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baTime</td>
      <td>Time of the transaction (“HHMMSS”)</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baTimeStamp</td>
      <td>Timestamp for the tables (“DDMMAAAASS”), where SS is ​any sequential number. The Telium EMV Kernel validates the timestamp.</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>iAppCount</td>
      <td> Number of entries on the list waAppArray</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>waAppArrayX</td>
      <td>Array containing the acquiring network identifier + table index of EMV parameters. Where X is the sequential number of the application, starting from 1. Example waAppArray1, waAppArray2...</td>
      <td>x</td>
      <td></td>
    </tr>
  </tbody>
</table>

<p><%= I18n.t("posxml.commands.emv_adddata.paragraph_9") %></p>

<table cellpadding="0" cellspacing="0" border="0" class="table table-bordered table-hover">
  <thead>
    <tr>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_4") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_5") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_6") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_7") %></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>baAmount</td>
      <td>Value of the transaction (Amount, authorized); may include new values presented after the instruction emv.inittransaction. 12 characters with 0 padding to the left, example: “000000005000”(50,00).</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baAmountOther</td>
      <td>Withdrawl value or change - cashback (Amount, other). 12 characters with 0 padding to the left, example: “000000005000”(50,00).</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>bfRefund</td>
      <td>Cancel the previous transaction</br>
      1 - yes</br>
      0 - no</br></td>
      <td></td>
      <td>x</td>
    </tr>
    <tr>
      <td>bBlackList</td>
      <td>Results of querying the blacklist (EMV)</br>
      0 - PAN not blacklisted</br>
      1 - PAN blacklisted.</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>bMustConnect</td>
      <td>Mandatory connection</br>
      0 - Transaction can be made offline</br>
      1 - Transaction can only be made online.</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>bRequirePIN</td>
      <td>PIN entry</br>
      0 - Not required</br>
      1 - Required.</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>bKeyMode</td>
      <td>Encryption mode to capture PIN online</br>
      2 - DUKPT DES(8 bytes)</br>
      3 - DUKPT 3DES(18 bytes)</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>bManageRisk</td>
      <td>EMV Risk Management</br>
      0 - Do not make a risk assessment</br>
      1 - Make a risk assessment.</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>dwFloorLimit</td>
      <td>Terminal Floor Limit (in cents).</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>dwThresholdValue</td>
      <td>Threshold Value for Biased Transaction Selection (in cents).</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>bMaximumTarget</td>
      <td>Maximum Target Percentage to be used for Biased Transaction Selection.</td>
      <td>x</td>
      <td></td>
    </tr>
    <tr>
      <td>bMandatoryTagsLen</td>
      <td>Field size of baMandatoryTags.</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baMandatoryTags</td>
      <td>List of the tags necessary to assemble the field 55 of the ISO-8583 message. (Hex)</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>bOptionalTagsLen</td>
      <td>Field size of baOptionalTags.</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baOptionalTags</td>
      <td>List of desirable tags to be retrieved in the operation. (Hex)</td>
      <td>x</td>
      <td>x</td>
    </tr>
  </tbody>
</table>

<p><%= I18n.t("posxml.commands.emv_adddata.paragraph_10") %></p>

<table cellpadding="0" cellspacing="0" border="0" class="table table-bordered table-hover">
  <thead>
    <tr>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_4") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_5") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_6") %></th>
      <th><%= I18n.t("posxml.commands.emv_adddata.paragraph_7") %></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bCommStatus</td>
      <td>Communication status with the Host</br>
      0 - Successful Communication</br>
      1 - Failed to communicate with the host.</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>bIssuerType</td>
      <td>Issuer type</br>
      0 - EMV “Full-Grade”</br>
      1 - EMV “Partial-Grade”.</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baInitialValue</td>
      <td>Authorization Response Code (em ASCII). Standard definitions:<br/>
      00 - Approved<br/>
      01 - Denied<br/>
      Y1 - Offline approved<br/>
      Y3 - Offline declined<br/>
      Z1 - Unable to go online, offline approved<br/>
      Z3 - Unable to go online, offline declined<br/></td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>iTLVDataEMVLen</td>
      <td>Field size of baTLVDataEMV.</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baTLVDataEMV</td>
      <td>Tags list returned by the issuer. (Hex)</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>bMandatoryTagsLen</td>
      <td>Field size of baMandatoryTags.</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>baMandatoryTags</td>
      <td>List of mandatory tags to be retrieved in the operation. (Hex)</td>
      <td>x</td>
      <td>x</td>
    </tr>
  </tbody>
</table>

<h2><%= I18n.t("posxml.commands.example") %></h2>

<%= embed_posxml_code("9fa094705897f32fc297", true) %>

<hr/>

<p><%= I18n.t("posxml.commands.emv_adddata.paragraph_11") %></p>
<p><%= I18n.t("posxml.commands.emv_adddata.paragraph_12") %></p>
